<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito | Tecno.Sun</title>

    <!-- BOOTSTRAP CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS PRINCIPAL (compilado desde SASS) -->
    <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<!-- ===== HEADER ===== -->
<header class="main-header">
    <div class="container text-center">

        <div class="brand d-flex align-items-center justify-content-center gap-3">
            <img src="../img/logo.jpg" alt="TecnoSun" class="logo">
            <h1 class="title m-0">Tecno.Sun</h1>
        </div>

        <nav class="navbar navbar-expand-md mt-3">

            <button class="navbar-toggler me-auto" type="button" data-bs-toggle="collapse" data-bs-target="#menuPrincipal">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse justify-content-center" id="menuPrincipal">
                <div class="nav-menu d-flex gap-3">
                    <a href="../index.html">Inicio</a>
                    <a href="productos.html">Productos</a>
                    <a href="contacto.html">Contacto</a>
                    <a href="ayuda.html">Ayuda</a>
                    <a href="carrito.html">ðŸ›’ Carrito (<span id="contador-carrito">0</span>)</a>
                </div>
            </div>

        </nav>

    </div>
</header>


<!-- ===== MAIN ===== -->

<main class="container my-5">
    <h2 class="text-center mb-4">Tu carrito</h2>

    <div id="lista-carrito"></div>

    <h4 class="text-end mt-4">
        Total: $<span id="total">0</span>
    </h4>

    <div class="d-flex justify-content-end gap-2 mt-3">
        <button class="btn btn-danger" onclick="vaciarCarrito()">Vaciar carrito</button>
        <a href="checkout.html" id="btn-finalizar" class="btn btn-primary">Finalizar compra</a>
    </div>
</main>

<!-- ===== FOOTER ===== -->
<footer class="main-footer">
    <div class="footer-links">
        <a href="https://www.instagram.com/tecno.sun/" target="_blank">Instagram</a>
        <span>|</span>
        <a href="https://wa.me/543493525259" target="_blank">WhatsApp</a>
    </div>

    <p>Â© 2026 Tecno.Sun â€“ Sitio oficial</p>
</footer>


<script>
function formatearPrecio(valor) {
    return valor.toLocaleString("es-AR");
}

function mostrarCarrito() {
    let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    let contenedor = document.getElementById("lista-carrito");
    let total = 0;

    contenedor.innerHTML = "";

    const btnFinalizar = document.getElementById("btn-finalizar");

    if (carrito.length === 0) {
        contenedor.innerHTML = "<p>El carrito estÃ¡ vacÃ­o.</p>";
        document.getElementById("total").textContent = "0";
        btnFinalizar.classList.add("disabled");
        btnFinalizar.setAttribute("aria-disabled", "true");
        actualizarContador();
        return;
    }

    carrito.forEach((producto, index) => {
        total += producto.precio;
        contenedor.innerHTML += `
            <div class="border p-3 mb-2 d-flex justify-content-between align-items-center">
                <span>${producto.nombre} - $ ${formatearPrecio(producto.precio)}</span>
                <button class="btn btn-sm btn-danger" onclick="eliminar(${index})">X</button>
            </div>
        `;
    });

    document.getElementById("total").textContent = formatearPrecio(total);
    btnFinalizar.classList.remove("disabled");
    btnFinalizar.removeAttribute("aria-disabled");

    actualizarContador();
}

function eliminar(index) {
    let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    carrito.splice(index, 1);
    localStorage.setItem("carrito", JSON.stringify(carrito));
    mostrarCarrito();
}

function vaciarCarrito() {
    localStorage.removeItem("carrito");
    mostrarCarrito();
}

function actualizarContador() {
    const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    const contador = document.getElementById("contador-carrito");
    if (contador) {
        contador.textContent = carrito.length;
    }
}

mostrarCarrito();
</script>


</body>
</html>

